<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Efectos Reactivos con Sensores de Dispositivo (Corregido)</title>
    <style>
        body {
            font-family: "Noto Sans", sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #1a1a2e;
            color: #e0e0e0;
            display: flex;
            flex-direction: column;
            gap: 50px;
            align-items: center;
            min-height: 100vh;
            text-align: center;
            /* Necesario para posicionar elementos relativos a la ventana si usáramos fixed */
            perspective: 1000px; 
        }

        h1 {
            color: #4a90e2; /* Un color más vibrante */
            font-size: 2.5em;
            margin-bottom: 30px;
        }

        /* --- 1. Efecto Texto Mágico (Fondo Estático) --- */
        .text-section {
            background-color: #272744;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.6);
            width: 90%;
            max-width: 600px;
            /* Necesario para el efecto de movimiento del texto */
            overflow: hidden; 
        }

        .text-section h2 {
            font-size: 3.5em; /* Un poco más grande */
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 2px;
            /* El fondo ahora es mucho más grande y con repeat */
            background-image: url('https://picsum.photos/id/1018/1000/600');
            background-size: 100%; /* Tamaño normal */
            background-repeat: repeat; /* Esto asegura que se repita como pediste */
            background-position: center center;
            background-clip: text;
            -webkit-background-clip: text;
            color: transparent;
            margin: 0;
            /* Transición suave para el movimiento de la posición del fondo */
            transition: background-position 0.1s ease-out; 
            /* Se establece una posición inicial muy descentrada para dar margen de movimiento */
            background-position: 50% 50%; 
        }

        .text-section p {
            margin-top: 15px;
        }

        /* --- 2. Efecto Revelador de Imagen (Visor Móvil) --- */
        .image-revealer-section {
            background-color: #272744;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.6);
            width: 90%;
            max-width: 600px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .image-revealer-section h3 {
            color: #4a90e2;
            font-size: 1.8em;
            margin-bottom: 20px;
        }

        .revealer-container {
            width: 300px; 
            height: 300px;
            background-color: #3e3e6f;
            border-radius: 50%;
            overflow: hidden; /* EL VISOR */
            position: relative;
            border: 5px solid #4a90e2;
            box-shadow: inset 0 0 15px rgba(0, 0, 0, 0.8), 0 0 10px #4a90e2;
        }

        .revealer-image {
            /* LA IMAGEN GRANDE A REVELAR (5x más grande que el contenedor para el ejemplo) */
            width: 1500px; 
            height: 1500px;
            position: absolute;
            top: -600px; /* Centrar la imagen (1500/2 - 300/2 = 600) */
            left: -600px;
            background-image: url('https://picsum.photos/id/237/1500/1500'); /* Imagen grande */
            background-size: cover;
            background-position: center center;
            /* La transición solo es para hacer la imagen más fluida */
            transition: transform 0.05s linear; 
        }

        .message {
            margin-top: 20px;
            font-size: 1.1em;
            color: #a0a0a0;
        }

        .no-support-message {
            color: #e74c3c;
            margin-top: 20px;
            font-weight: bold;
        }
    </style>
</head>
<body>

    <h1>Efectos Interactivo con Sensores del Teléfono</h1>

    <section class="text-section">
        <h2>Texto Mágico</h2>
        <p>⚠️ **Efecto de Fondo Estático:** Inclina tu dispositivo. El texto se moverá sobre un fondo que parece quieto en el espacio. ¡Como una ventana!</p>
    </section>

    <section class="image-revealer-section">
        <h3>Visor de Imagen Gigante</h3>
        <p class="message">⚠️ **Efecto de Visor Móvil:** Mueve el teléfono lentamente para explorar la imagen super grande dentro del círculo.</p>
        <div class="revealer-container">
            <div class="revealer-image" id="revealerImage"></div>
        </div>
        <p class="no-support-message" id="noSupportMessage" style="display: none;">
            Tu navegador o dispositivo no soporta la API de DeviceOrientation.
        </p>
    </section>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const h2Element = document.querySelector('.text-section h2');
            const revealerImage = document.getElementById('revealerImage');
            const noSupportMessage = document.getElementById('noSupportMessage');

            // 1. Verificar soporte
            if (window.DeviceOrientationEvent) {
                // Si soporta, ocultamos el mensaje de error
                noSupportMessage.style.display = 'none';

                window.addEventListener('deviceorientation', (event) => {
                    // event.gamma: Eje X (de lado a lado) - Rango: ~[-90, 90]
                    // event.beta:   Eje Y (de adelante hacia atrás) - Rango: ~[-180, 180]

                    // --- 1. Efecto Texto Mágico (Fondo Estático) ---
                    // Para que parezca fijo, el fondo debe moverse en la MISMA dirección 
                    // que la pantalla, pero a una velocidad menor (Parallax).
                    const textSensitivity = 1.5; // Ajusta el factor de movimiento (menos es más sutil)
                    
                    // La posición del fondo se ajusta directamente con beta y gamma.
                    // Multiplicar por -1 NO es necesario aquí si movemos la posición.
                    const textOffsetX = event.gamma * textSensitivity; 
                    const textOffsetY = event.beta * textSensitivity;
                    
                    // Se usa calc() para mover la posición del fondo de la máscara de texto.
                    // El 50% es la posición central, y se le añade el offset.
                    h2Element.style.backgroundPosition = `
                        calc(50% + ${textOffsetX}px) 
                        calc(50% + ${textOffsetY}px)
                    `;


                    // --- 2. Efecto Revelador de Imagen (Visor Móvil) ---
                    // Para que la imagen parezca pegada a la pantalla (Visor Móvil),
                    // la imagen *detrás* del visor debe moverse en la DIRECCIÓN OPUESTA
                    // a la inclinación del dispositivo. Esto es la corrección crucial.
                    const revealerSensitivity = 15; // Un valor más alto hace la imagen más reactiva.
                    
                    // Si te inclinas a la DERECHA (+gamma), la imagen debe moverse a la IZQUIERDA (-X).
                    const revealerTranslateX = (event.gamma / revealerSensitivity) * -1;
                    // Si te inclinas HACIA ADELANTE (+beta), la imagen debe moverse HACIA ARRIBA (-Y).
                    const revealerTranslateY = (event.beta / revealerSensitivity) * -1;

                    // Se usa transform: translate() para mover la imagen GRANDE.
                    // El movimiento es relativo a su posición inicial (-600px, -600px).
                    revealerImage.style.transform = `
                        translate(${revealerTranslateX}px, ${revealerTranslateY}px)
                    `;
                    
                }, true);
                
            } else {
                // Fallback en caso de no soportar
                console.warn("DeviceOrientation no soportado en este navegador/dispositivo.");
                noSupportMessage.style.display = 'block';
            }
        });
    </script>
</body>
</html>
